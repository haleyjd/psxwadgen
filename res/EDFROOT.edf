stdinclude("root.edf");
setdialect("Alfheim");

//
// Fonts
//

font psx_menu_font
{
  start       '!'
  end         0x7f
  linesize    8
  spacesize   4
  tallestchar 8
  colorable   true
  uppercase   true
  widthdelta  1  
  
  filter { start '!'; end 0x7f; mask "MNUFN%.3d" }
}

mn_font        psx_menu_font
mn_font_normal psx_menu_font

font ee_bigfont
{
  id          2
  start       '!'
  end         'z'
  linesize    17
  tallestchar 16
  spacesize   8
  colorable   true
  uppercase   false
  widthdelta  1

  patchnumoffset 32
  filter { start '!'; end 'z'; mask "FONTB%.2d" }

  defaultcolor red

  // TODO:
  colortables
  {
    brick  @identity
    tan    @identity
    gray   @identity
    green  @identity
    brown  @identity
    gold   @identity
    red    @identity
    blue   @identity
    orange @identity
    yellow @identity
  }
}

f_font ee_bigfont

//
// Game Properties
//

gameproperties
{
  border.flat       "METX02"
  credit.background "WATER01"
  finale.text.y     7
  flags.add         MNBIGFONT
  menu.background   "MARB01"
  missionflags.add  ALLOWSECRETTAG
}

//
// Monster mods
//

// Revenant shots are approximately half as fast
thingdelta
{
  name  TracerShot
  speed 4.28571
}

// Revenants walk approximately half as fast
framedelta { name S_SKEL_RUN1;  tics 4 }
framedelta { name S_SKEL_RUN2;  tics 4 }
framedelta { name S_SKEL_RUN3;  tics 4 }
framedelta { name S_SKEL_RUN4;  tics 4 }
framedelta { name S_SKEL_RUN5;  tics 4 }
framedelta { name S_SKEL_RUN6;  tics 4 }
framedelta { name S_SKEL_RUN7;  tics 4 }
framedelta { name S_SKEL_RUN8;  tics 4 }
framedelta { name S_SKEL_RUN9;  tics 4 }
framedelta { name S_SKEL_RUN10; tics 4 }
framedelta { name S_SKEL_RUN11; tics 4 }
framedelta { name S_SKEL_RUN12; tics 4 }

//
// Cast call
//

// Just need to change names of first 15
string PSXCastZombieman  { bexdest "CC_ZOMBIE";  val "Zombieman"             }
string PSXCastShotgunGuy { bexdest "CC_SHOTGUN"; val "Shotgun Guy"           }
string PSXCastHeavyDude  { bexdest "CC_HEAVY";   val "Heavy Weapon Dude"     }
string PSXCastImp        { bexdest "CC_IMP";     val "Imp"                   }
string PSXCastDemon      { bexdest "CC_DEMON";   val "Demon"                 }
string PSXCastLostSoul   { bexdest "CC_LOST";    val "Lost Soul"             }
string PSXCastCacodemon  { bexdest "CC_CACO";    val "Cacodemon"             }
string PSXCastHellKnight { bexdest "CC_HELL";    val "Hell Knight"           }
string PSXCastBaron      { bexdest "CC_BARON";   val "Baron Of Hell"         }
string PSXCastBabySpider { bexdest "CC_ARACH";   val "Arachnotron"           }
string PSXCastPain       { bexdest "CC_PAIN";    val "Pain Elemental"        }
string PSXCastRevenant   { bexdest "CC_REVEN";   val "Revenant"              }
string PSXCastMancubus   { bexdest "CC_MANCU";   val "Mancubus"              }
string PSXCastSpider     { bexdest "CC_ARCH";    val "The Spider Mastermind" } // Archie is skipped
string PSXCastCyberdemon { bexdest "CC_SPIDER";  val "The Cyberdemon"        }

// Need a thingtype for player w/tweaked states
thingtype PSXFauxPlayer
{
  deathsound pldeth
  states
  @"
  Spawn:
    PLAY A 10
    loop
  See:
    PLAY ABCD 4
    loop
  Missile:
    PLAY F 6 bright
    PLAY E 12 
    goto See
  Death:
    PLAY HIJKLM 10
    PLAY N      -1
    stop
  "@
}

// 16th thing is Our Hero
castinfo PSXCastPlayer
{
  type  PSXFauxPlayer
  name  "Our Hero"
  sound { frame "Missile"; sfx dshtgn }
}

// Set the order of appearance (note no Arch-Vile!)
castorder
{
  Zombieman,
  Sergeant,
  Chaingunner,
  DoomImp,
  Demon,
  LostSoul,
  Cacodemon,
  HellKnight,
  BaronOfHell,
  Arachnotron,
  PainElemental,
  Revenant,
  Mancubus,
  Spiderdemon,
  Cyberdemon,
  PSXCastPlayer
}
